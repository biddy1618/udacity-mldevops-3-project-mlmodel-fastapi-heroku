schema: '2.0'
stages:
  clean_data:
    cmd: python -m src.clean_data.clean_data --raw_data src/data/census.csv --clean_data
      src/data/census_clean.csv
    deps:
    - path: src/clean_data
      md5: 5d55d7963cd210f9deb3709938d518f0.dir
      size: 6597
      nfiles: 6
    - path: src/data/census.csv
      md5: 145de00f6e6053d3f7044628f9a5b5ff
      size: 3974474
    outs:
    - path: src/data/census_clean.csv
      md5: 38efc907adc42e60a4b0ed7bddc4a1b2
      size: 3541549
  split_data:
    cmd: python -m src.split_data.split_data --clean_data src/data/census_clean.csv
      --split_random_state 48 --split_test_size 0.2 --split_train src/data/train.csv
      --split_test src/data/test.csv
    deps:
    - path: src/data/census_clean.csv
      md5: 38efc907adc42e60a4b0ed7bddc4a1b2
      size: 3541549
    - path: src/split_data
      md5: 8ca5f49518dce1c866b2206c5a1b6a19.dir
      size: 4385
      nfiles: 4
    outs:
    - path: src/data/test.csv
      md5: c9db0e484807efe9b1991f49857f4313
      size: 708421
    - path: src/data/train.csv
      md5: 57aa5d76f0ce31d5ad4089ac18d1f3b4
      size: 2833283
  train_model:
    cmd: python -m src.train_model.train_model --train_data src/data/train.csv --valid_size
      0.2 --valid_random_state 48 --model_random_state 48 --model src/model/model.joblib
    deps:
    - path: src/data/train.csv
      md5: 57aa5d76f0ce31d5ad4089ac18d1f3b4
      size: 2833283
    - path: src/train_model
      md5: 374ce6f45743385351c0f92da70b9f17.dir
      size: 17969
      nfiles: 10
    params:
      params.yaml:
        train_model.model_random_state: 48
        train_model.valid_random_state: 48
        train_model.valid_size: 0.2
    outs:
    - path: src/model/model.joblib
      md5: 119897d44d1510aa4a38628817d3389b
      size: 183271
  check_data:
    cmd: pytest src/check_data/ -vv --data_path src/data/census_clean.csv
    deps:
    - path: src/check_data
      md5: aec162ca3291683840fee0e44a3d029e.dir
      size: 9712
      nfiles: 6
    - path: src/data/census_clean.csv
      md5: 38efc907adc42e60a4b0ed7bddc4a1b2
      size: 3541549
  evaluate_model:
    cmd: python -m src.evaluate_model.evaluate_model --model src/model/model.joblib
      --test_data src/data/test.csv --metrics src/metrics
    deps:
    - path: src/data/test.csv
      md5: c9db0e484807efe9b1991f49857f4313
      size: 708421
    - path: src/evaluate_model
      md5: ba809e6843572ffc484fc6421c2194cf.dir
      size: 8723
      nfiles: 4
    - path: src/model/model.joblib
      md5: 119897d44d1510aa4a38628817d3389b
      size: 183271
    outs:
    - path: src/metrics/metrics.json
      md5: f3bdffc6993ced246c4eca13d8397eaa
      size: 2399
    - path: src/metrics/precision_recall_curve.csv
      md5: da8393a9d29b99462d56dce2527131cb
      size: 195807
    - path: src/metrics/predictions.csv
      md5: acb71e8b61c0e1a9b26de4c08a312aca
      size: 39065
